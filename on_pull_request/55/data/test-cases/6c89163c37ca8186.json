{"uid":"6c89163c37ca8186","name":"[WEB Component] Should subscribe with valid email","fullName":"tests.web.component.base.test_subscription_component.TestSubscriptionComponent#test_should_subscribe_with_valid_email","historyId":"e3dbe5390bcb4aebf1e5d40f0a94ad44","time":{"start":1772065347214,"stop":1772065351767,"duration":4553},"status":"failed","statusMessage":"selene.core.exceptions.TimeoutException: Message: \n\nTimed out after 4s, while waiting for:\nbrowser.element(('css selector', '#footer .single-widget')).element(('xpath', './/ancestor::footer')).element(('css selector', '#success-subscribe')).element(('css selector', '.alert')).has exact text You have been successfully subscribed!\n\nReason: AssertionError: actual text: \nScreenshot: file:///root/.selene/screenshots/1772065259251/1772065259252.png\nPageSource: file:///root/.selene/screenshots/1772065259251/1772065259252.html","statusTrace":"fn = <selene.core.conditions.ElementCondition object at 0x7f92669e0fa0>\n\n    def logic(fn: Callable[[E], R]) -> R:\n        finish_time = time.time() + self._timeout\n    \n        while True:\n            try:\n>               return fn(self.entity)\n                       ^^^^^^^^^^^^^^^\n\n/usr/local/lib/python3.13/site-packages/selene/core/wait.py:119: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/usr/local/lib/python3.13/site-packages/selene/core/condition.py:174: in __call__\n    return self._fn(entity)\n           ^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nentity = <selene.core.entity.Element object at 0x7f92669ee450>\n\n    def fn(entity: E) -> None:\n        query_to_str = str(query)\n        result = (\n            query.__name__ if query_to_str.startswith('<function') else query_to_str\n        )\n        actual = query(entity)\n        if not predicate(actual):\n>           raise AssertionError(f'actual {result}: {actual}')\nE           AssertionError: actual text:\n\n/usr/local/lib/python3.13/site-packages/selene/core/condition.py:146: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <tests.web.component.base.test_subscription_component.TestSubscriptionComponent object at 0x7f9266d01590>\n\n    @pytest.mark.screenshot_test\n    @allure.label(\"owner\", \"arrnel\")\n    @allure.story(\"[Web] Component - Subscription component\")\n    @allure.title(\"[WEB Component] Should subscribe with valid email\")\n    def test_should_subscribe_with_valid_email(self):\n        # Steps\n        self.main_page.subscription.subscribe(EmailUtil.valid_email().random())\n    \n        # Assertion\n>       self.main_page.subscription.check_subscribe_has_success_status_message()\n\ntests/web/component/base/test_subscription_component.py:38: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/ui/component/common/subscription_component.py:38: in check_subscribe_has_success_status_message\n    self.__locator.status_message().should_have_text(_SUCCESS_SUBSCRIPTION_MESSAGE)\nsrc/util/decorator/step_logger.py:75: in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\nsrc/ui/element/base_element.py:250: in should_have_text\n    self._root.should(have.exact_text(value))\n/usr/local/lib/python3.13/site-packages/selene/core/entity.py:132: in should\n    self.wait.for_(condition)\n/usr/local/lib/python3.13/site-packages/selene/core/wait.py:150: in for_\n    return self._decorator(self)(logic)(fn)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nfn = <selene.core.conditions.ElementCondition object at 0x7f92669e0fa0>\n\n    def logic(fn: Callable[[E], R]) -> R:\n        finish_time = time.time() + self._timeout\n    \n        while True:\n            try:\n                return fn(self.entity)\n            except Exception as reason:\n                if time.time() > finish_time:\n                    reason_string = '{name}: {message}'.format(\n                        name=reason.__class__.__name__,\n                        message=getattr(reason, \"msg\", str(reason)),\n                    )\n                    # TODO: think on how can we improve logging failures in selene, e.g. reverse msg and stacktrace\n                    # stacktrace = getattr(reason, 'stacktrace', None)\n                    # TODO: should we have an option to turn on stacktrace logging?\n                    timeout = self._timeout\n                    entity = self.entity\n    \n                    # if it's a normal function, it should have __qualname__,\n                    # then use it, otherwise use str(fn)\n                    fn_name = getattr(\n                        fn,\n                        '__qualname__',\n                        getattr(fn, '__str__', lambda: str(fn))(),\n                    )\n    \n                    failure = TimeoutException(\n                        f'\\n'\n                        f'\\nTimed out after {timeout}s, while waiting for:'\n                        f'\\n{entity}.{fn_name}'\n                        f'\\n'\n                        f'\\nReason: {reason_string}'\n                    )\n    \n>                   raise self._hook_failure(failure)\nE                   selene.core.exceptions.TimeoutException: Message: \nE                   \nE                   Timed out after 4s, while waiting for:\nE                   browser.element(('css selector', '#footer .single-widget')).element(('xpath', './/ancestor::footer')).element(('css selector', '#success-subscribe')).element(('css selector', '.alert')).has exact text You have been successfully subscribed!\nE                   \nE                   Reason: AssertionError: actual text: \nE                   Screenshot: file:///root/.selene/screenshots/1772065259251/1772065259252.png\nE                   PageSource: file:///root/.selene/screenshots/1772065259251/1772065259252.html\n\n/usr/local/lib/python3.13/site-packages/selene/core/wait.py:148: TimeoutException","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1772065261979,"stop":1772065261981,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"All UI tests fixture","time":{"start":1772065261981,"stop":1772065261982,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"All test fixtures","time":{"start":1772065261981,"stop":1772065261981,"duration":0},"status":"passed","steps":[{"name":"Tests configuration data","time":{"start":1772065261981,"stop":1772065261981,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"c895e2878f77e5dc","name":"Configuration","source":"c895e2878f77e5dc.txt","type":"text/plain","size":1705}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Each UI test fixture","time":{"start":1772065328865,"stop":1772065347126,"duration":18261},"status":"passed","steps":[{"name":"Open browser","time":{"start":1772065328866,"stop":1772065347126,"duration":18260},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Each test fixtures","time":{"start":1772065328865,"stop":1772065328865,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_xunit_setup_method_fixture_TestSubscriptionComponent","time":{"start":1772065347126,"stop":1772065347212,"duration":86},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"selene.core.exceptions.TimeoutException: Message: \n\nTimed out after 4s, while waiting for:\nbrowser.element(('css selector', '#footer .single-widget')).element(('xpath', './/ancestor::footer')).element(('css selector', '#success-subscribe')).element(('css selector', '.alert')).has exact text You have been successfully subscribed!\n\nReason: AssertionError: actual text: \nScreenshot: file:///root/.selene/screenshots/1772065259251/1772065259252.png\nPageSource: file:///root/.selene/screenshots/1772065259251/1772065259252.html","statusTrace":"fn = <selene.core.conditions.ElementCondition object at 0x7f92669e0fa0>\n\n    def logic(fn: Callable[[E], R]) -> R:\n        finish_time = time.time() + self._timeout\n    \n        while True:\n            try:\n>               return fn(self.entity)\n                       ^^^^^^^^^^^^^^^\n\n/usr/local/lib/python3.13/site-packages/selene/core/wait.py:119: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/usr/local/lib/python3.13/site-packages/selene/core/condition.py:174: in __call__\n    return self._fn(entity)\n           ^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nentity = <selene.core.entity.Element object at 0x7f92669ee450>\n\n    def fn(entity: E) -> None:\n        query_to_str = str(query)\n        result = (\n            query.__name__ if query_to_str.startswith('<function') else query_to_str\n        )\n        actual = query(entity)\n        if not predicate(actual):\n>           raise AssertionError(f'actual {result}: {actual}')\nE           AssertionError: actual text:\n\n/usr/local/lib/python3.13/site-packages/selene/core/condition.py:146: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <tests.web.component.base.test_subscription_component.TestSubscriptionComponent object at 0x7f9266d01590>\n\n    @pytest.mark.screenshot_test\n    @allure.label(\"owner\", \"arrnel\")\n    @allure.story(\"[Web] Component - Subscription component\")\n    @allure.title(\"[WEB Component] Should subscribe with valid email\")\n    def test_should_subscribe_with_valid_email(self):\n        # Steps\n        self.main_page.subscription.subscribe(EmailUtil.valid_email().random())\n    \n        # Assertion\n>       self.main_page.subscription.check_subscribe_has_success_status_message()\n\ntests/web/component/base/test_subscription_component.py:38: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/ui/component/common/subscription_component.py:38: in check_subscribe_has_success_status_message\n    self.__locator.status_message().should_have_text(_SUCCESS_SUBSCRIPTION_MESSAGE)\nsrc/util/decorator/step_logger.py:75: in wrapper\n    return func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\nsrc/ui/element/base_element.py:250: in should_have_text\n    self._root.should(have.exact_text(value))\n/usr/local/lib/python3.13/site-packages/selene/core/entity.py:132: in should\n    self.wait.for_(condition)\n/usr/local/lib/python3.13/site-packages/selene/core/wait.py:150: in for_\n    return self._decorator(self)(logic)(fn)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nfn = <selene.core.conditions.ElementCondition object at 0x7f92669e0fa0>\n\n    def logic(fn: Callable[[E], R]) -> R:\n        finish_time = time.time() + self._timeout\n    \n        while True:\n            try:\n                return fn(self.entity)\n            except Exception as reason:\n                if time.time() > finish_time:\n                    reason_string = '{name}: {message}'.format(\n                        name=reason.__class__.__name__,\n                        message=getattr(reason, \"msg\", str(reason)),\n                    )\n                    # TODO: think on how can we improve logging failures in selene, e.g. reverse msg and stacktrace\n                    # stacktrace = getattr(reason, 'stacktrace', None)\n                    # TODO: should we have an option to turn on stacktrace logging?\n                    timeout = self._timeout\n                    entity = self.entity\n    \n                    # if it's a normal function, it should have __qualname__,\n                    # then use it, otherwise use str(fn)\n                    fn_name = getattr(\n                        fn,\n                        '__qualname__',\n                        getattr(fn, '__str__', lambda: str(fn))(),\n                    )\n    \n                    failure = TimeoutException(\n                        f'\\n'\n                        f'\\nTimed out after {timeout}s, while waiting for:'\n                        f'\\n{entity}.{fn_name}'\n                        f'\\n'\n                        f'\\nReason: {reason_string}'\n                    )\n    \n>                   raise self._hook_failure(failure)\nE                   selene.core.exceptions.TimeoutException: Message: \nE                   \nE                   Timed out after 4s, while waiting for:\nE                   browser.element(('css selector', '#footer .single-widget')).element(('xpath', './/ancestor::footer')).element(('css selector', '#success-subscribe')).element(('css selector', '.alert')).has exact text You have been successfully subscribed!\nE                   \nE                   Reason: AssertionError: actual text: \nE                   Screenshot: file:///root/.selene/screenshots/1772065259251/1772065259252.png\nE                   PageSource: file:///root/.selene/screenshots/1772065259251/1772065259252.html\n\n/usr/local/lib/python3.13/site-packages/selene/core/wait.py:148: TimeoutException","steps":[{"name":"Subscribe by email: \"jthompson\"@test.arrnel.com","time":{"start":1772065347215,"stop":1772065347514,"duration":299},"status":"passed","steps":[{"name":"Fill [Email]: \"jthompson\"@test.arrnel.com","time":{"start":1772065347215,"stop":1772065347411,"duration":196},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Click on [Submit] button","time":{"start":1772065347411,"stop":1772065347514,"duration":103},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check [Status message has text: You have been successfully subscribed!]","time":{"start":1772065347515,"stop":1772065351764,"duration":4249},"status":"failed","statusMessage":"selene.core.exceptions.TimeoutException: Message: \n\nTimed out after 4s, while waiting for:\nbrowser.element(('css selector', '#footer .single-widget')).element(('xpath', './/ancestor::footer')).element(('css selector', '#success-subscribe')).element(('css selector', '.alert')).has exact text You have been successfully subscribed!\n\nReason: AssertionError: actual text: \nScreenshot: file:///root/.selene/screenshots/1772065259251/1772065259252.png\nPageSource: file:///root/.selene/screenshots/1772065259251/1772065259252.html\n\n","statusTrace":"  File \"/automation-exercise-py/src/util/decorator/step_logger.py\", line 75, in wrapper\n    return func(*args, **kwargs)\n  File \"/automation-exercise-py/src/ui/element/base_element.py\", line 250, in should_have_text\n    self._root.should(have.exact_text(value))\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/selene/core/entity.py\", line 132, in should\n    self.wait.for_(condition)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/usr/local/lib/python3.13/site-packages/selene/core/wait.py\", line 150, in for_\n    return self._decorator(self)(logic)(fn)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^\n  File \"/usr/local/lib/python3.13/site-packages/selene/core/wait.py\", line 148, in logic\n    raise self._hook_failure(failure)\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Get test video from Selenoid by video id = [test_should_subscribe_with_valid_email]","time":{"start":1772065352172,"stop":1772065356181,"duration":4009},"status":"passed","steps":[{"name":"Send request [GET]: /video/test_should_subscribe_with_valid_email.mp4","time":{"start":1772065352173,"stop":1772065352176,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"fc23d6d42aff078f","name":"Request","source":"fc23d6d42aff078f.txt","type":"text/plain","size":362},{"uid":"dd67e34fea98d442","name":"Response","source":"dd67e34fea98d442.txt","type":"text/plain","size":253}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Send request [GET]: /video/test_should_subscribe_with_valid_email.mp4","time":{"start":1772065356177,"stop":1772065356181,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"35376d5b67b90996","name":"Request","source":"35376d5b67b90996.txt","type":"text/plain","size":362},{"uid":"90d0279ea494694b","name":"Response","source":"90d0279ea494694b.txt","type":"text/plain","size":280}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"26e33a1829b4dd24","name":"Screenshot","source":"26e33a1829b4dd24.png","type":"image/png","size":191615},{"uid":"9500490d6ca7fb1e","name":"Page Source","source":"9500490d6ca7fb1e.html","type":"text/html","size":52625},{"uid":"475a4e1bc03edc9f","name":"Test video","source":"475a4e1bc03edc9f.mp4","type":"video/mp4","size":160846},{"uid":"83481fc3a6778349","name":"log","source":"83481fc3a6778349.txt","type":"text/plain","size":254},{"uid":"51c395f6b08f1191","name":"stderr","source":"51c395f6b08f1191.txt","type":"text/plain","size":2027}],"parameters":[],"stepsCount":7,"shouldDisplayMessage":true,"attachmentsCount":9,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"_xunit_setup_method_fixture_TestSubscriptionComponent::0","time":{"start":1772065356182,"stop":1772065356182,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Each UI test fixture::0","time":{"start":1772065356183,"stop":1772065356183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Each test fixtures::0","time":{"start":1772065356183,"stop":1772065356184,"duration":1},"status":"passed","steps":[{"name":"Remove current test users from backend","time":{"start":1772065356183,"stop":1772065356183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"All test fixtures::0","time":{"start":1772065577632,"stop":1772065577632,"duration":0},"status":"passed","steps":[{"name":"Remove users from backend after all tests","time":{"start":1772065577632,"stop":1772065577632,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"story","value":"[Web] Component - Subscription component"},{"name":"feature","value":"Subscription Component"},{"name":"epic","value":"WEB Component"},{"name":"owner","value":"arrnel"},{"name":"tag","value":"screenshot_test"},{"name":"tag","value":"web_test"},{"name":"tag","value":"component_test"},{"name":"tag","value":"subscription_component_test"},{"name":"parentSuite","value":"tests.web.component.base"},{"name":"suite","value":"test_subscription_component"},{"name":"subSuite","value":"TestSubscriptionComponent"},{"name":"host","value":"d9277ee83859"},{"name":"thread","value":"15-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.web.component.base.test_subscription_component"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","owner":"arrnel","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["web_test","screenshot_test","component_test","subscription_component_test"]},"source":"6c89163c37ca8186.json","parameterValues":[]}